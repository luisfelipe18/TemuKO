#pragma once

#define CONF_GAME_SERVER	"./.GameServer.ini"
#define CONF_EVENT_AWARDS	"./.EventAwards.ini"
#define CONF_CHAT	        "./.Chat.ini"

#define _UDP_PORT			8888
#define CLIENT_SOCKSIZE		100

#define MAX_NPC_SIZE		30

#define MAX_TYPE3_REPEAT	40
#define MAX_TYPE4_BUFF		50

#define MAX_ITEM			28

#define NPC_HAVE_ITEM_LIST	8
#define DROP_MAX_TIME		60 // As second

#define ZONEITEM_MAX		2100000000
#define COIN_MAX			2100000000
#define LOYALTY_MAX			2100000000

#define MAX_CLASS		26
#define MAX_LEVEL		83
#define MAX_PLAYER_HP	14000
#define MAX_DAMAGE      32000 // Game uses a signed 2 byte integer, so the limit is technically 32,767. The game, however, caps it at 32,000.

#define MAX_MESSAGE_EVENT		12
#define MAX_TEMPLE_EVENT_ROOM	60
#define MAX_CSW_CLAN			30
#define MAX_TEMPLE_QUEST_EVENT_ROOM	1500

// BBS Related
#define MAX_BBS_PAGE			22
#define MAX_BBS_MESSAGE			40
#define MAX_BBS_TITLE			20
#define MAX_BBS_POST			500

#define BUY_POST_PRICE			500
#define SELL_POST_PRICE			1000

#define REMOTE_PURCHASE_PRICE	5000
#define BBS_CHECK_TIME			36000

#define BATTLE 6

#define KARUS_ARRAY (KARUS - 1)
#define ELMORAD_ARRAY (ELMORAD - 1)
#define MONSTER_CHALLENGE_COUNT 32

// Attack Type
#define DIRECT_ATTACK		0
#define LONG_ATTACK			1
#define MAGIC_ATTACK		2
#define DURATION_ATTACK		3

#define ABSORBED_TOTAL	-20000

enum InOutType
{
	INOUT_IN		= 1,
	INOUT_OUT		= 2,
	INOUT_RESPAWN	= 3,
	INOUT_WARP		= 4,
	INOUT_SUMMON	= 5
};

#define BLINK_TIME				(10) // in seconds
#define CLAN_SUMMON_TIME		(180)
#define PLAYER_IDLE_TIME		(300)

// About Map Object
#define USER_BAND				0			// Map ID User
#define NPC_BAND				10000		// Map ID Npc 
#define INVALID_BAND			60000		// Invalid ID BAND 

#define EVENT_MONSTER			20

// Snow Event
#define SNOW_EVENT_MONEY		2000
#define SNOW_EVENT_SKILL		490077

// Temple Event
#define BIFROST_EVENT_COUNT				3
#define CHAOS_EVENT_COUNT				3
#define BORDER_DEFENSE_WAR_EVENT_COUNT	5
#define JURAD_MOUNTAIN_EVENT_COUNT		3
#define KNIGHT_ROYALE_EVENT_COUNT		2
#define TEMPLE_TERMINITION_TIME_FINISH	20
#define JURAD_MOUNTAIN_EVENT_TIME		3000 // seconds
#define BORDER_DEFENSE_WAR_EVENT_TIME	1800 // seconds
#define CHAOS_EVENT_TIME				1200 // seconds
#define MONSTER_STONE_TIME				1800 // seconds
#define MONSTER_STONE_DEAD_TIME			1800 // seconds
#define MONSTER_STONE_FINISH_TIME		20	 // seconds
#define DRAKI_TOWER_MONSTER_KILL_TIME   315

#define JURAID_MOUNTATIN_WINNER_LOSTEXP 1

// Users under level 35 require 3,000 coins to shout.
#define SHOUT_COIN_REQUIREMENT 3000

// Battlezone Announcement
#define BATTLEZONE_NONE					0xFF
#define BATTLEZONE_OPEN					0x00
#define BATTLEZONE_CLOSE				0x01
#define DECLARE_WINNER					0x02
#define DECLARE_LOSER					0x03
#define DECLARE_BAN						0x04
#define KARUS_CAPTAIN_NOTIFY			0x05
#define ELMORAD_CAPTAIN_NOTIFY			0x06
#define KARUS_CAPTAIN_DEPRIVE_NOTIFY	0x07
#define ELMORAD_CAPTAIN_DEPRIVE_NOTIFY	0x08
#define SNOW_BATTLEZONE_OPEN			0x09
#define UNDER_ATTACK_NOTIFY				0x10
#define DECLARE_BATTLE_ZONE_STATUS		0x11
#define DECLARE_BATTLE_MONUMENT_STATUS  0x12
#define DECLARE_NATION_MONUMENT_STATUS  0x13
#define DECLARE_NATION_REWARD_STATUS	0x14
#define SNOW_BATTLEZONE_CLOSE			0x15
#define SNOW_BAN						0x16

#define WAR_TIME_COUNT      3
#define WAR_ZONE_COUNT      WAR_TIME_COUNT
#define WAR_DAY_COUNT		7

// Battle define
#define NO_BATTLE				0
#define NATION_BATTLE			1
#define SNOW_BATTLE				2
#define SIEGE_BATTLE			3
#define CLAN_BATTLE				4

// Zone IDs
#define ZONE_KARUS				1
#define ZONE_ELMORAD			2
#define ZONE_KARUS_ESLANT		11
#define ZONE_ELMORAD_ESLANT		12
#define ZONE_MORADON			21
#define ZONE_DELOS				30
#define ZONE_BIFROST			31
#define ZONE_DESPERATION_ABYSS	32
#define ZONE_HELL_ABYSS			33
#define ZONE_DRAGON_CAVE		34
#define ZONE_DELOS_CASTELLAN	35
#define ZONE_ARENA				48
#define ZONE_ORC_ARENA			51
#define ZONE_BLOOD_DON_ARENA	52
#define ZONE_GOBLIN_ARENA		53
#define ZONE_CAITHAROS_ARENA	54
#define ZONE_FORGOTTEN_TEMPLE	55
#define ZONE_LOST_TEMPLE		56

//Military Zone IDs
#define ZONE_KARUS2					5
#define ZONE_KARUS3					6

#define ZONE_ELMORAD2				7
#define ZONE_ELMORAD3				8

#define ZONE_MORADON2				22
#define ZONE_MORADON3				23
#define ZONE_MORADON4				24
#define ZONE_MORADON5				25

#define ZONE_KARUS_ESLANT2			13
#define ZONE_KARUS_ESLANT3			14

#define ZONE_ELMORAD_ESLANT2		15
#define ZONE_ELMORAD_ESLANT3		16

#define ZONE_BATTLE_BASE		60

#define ZONE_BATTLE			ZONE_BATTLE_BASE + 1 // Napies Gorge
#define ZONE_BATTLE2		ZONE_BATTLE_BASE + 2 // Alseids Prairie
#define ZONE_BATTLE3		ZONE_BATTLE_BASE + 3 // Nieds Triangle
#define ZONE_BATTLE4		ZONE_BATTLE_BASE + 4 // Nereid's Island
#define ZONE_BATTLE5		ZONE_BATTLE_BASE + 5 // Zipang
#define ZONE_BATTLE6		ZONE_BATTLE_BASE + 6 // Oreads

#define ZONE_SNOW_BATTLE		69
#define ZONE_RONARK_LAND		71
#define ZONE_ARDREAM			72
#define ZONE_RONARK_LAND_BASE	73
#define ZONE_KROWAZ_DOMINION	75

#define ZONE_STONE1				81
#define ZONE_STONE2				82
#define ZONE_STONE3				83
#define ZONE_BORDER_DEFENSE_WAR	84
#define ZONE_CHAOS_DUNGEON		85
#define ZONE_UNDER_CASTLE		86
#define ZONE_JURAID_MOUNTAIN	87
#define ZONE_PRISON				92
#define ZONE_ISILOON_ARENA		93
#define ZONE_FELANKOR_ARENA		94

#define ZONE_DRAKI_TOWER		95
#define ZONE_DUNGEON_DEFENCE	89
#define ZONE_OLD_MORADON		29
#define ZONE_KNIGHT_ROYALE		76
#define ZONE_CLAN_WAR_ARDREAM	77
#define ZONE_CLAN_WAR_RONARK	78
#define ZONE_OLD_KARUS			18
#define ZONE_OLD_HUMAN			28
#define ZONE_NEW_BATTLE_TEST	74
#define ZONE_PARTY_VS_1			96
#define ZONE_PARTY_VS_2			97
#define ZONE_PARTY_VS_3			98
#define ZONE_PARTY_VS_4			99

#define ZONE_FSUBJUGATION_FORCE 10002
#define ZONE_EKIONTRMAGICIAN    10003
#define ZONE_KECOONS_BOSS       10004
#define ZONE_CURSED_CRYSTAL     10005
#define ZONE_SOMINARK_FOREST    10006
#define ZONE_SOGODDES_IMIR      10007
#define ZONE_BIRTH_OF_DRAGON    10008
#define ZONE_SOPIANA_KNIGHTS    10009
#define ZONE_MOATREASURE_HUNTER 10010
#define ZONE_DEGENERATES_NEST   10011
#define ZONE_MOANCIENT_PALADIN  10012
#define ZONE_HARPYS_NEST        10013
#define ZONE_KNIGHTSINBLOOD_RED 10014

#define MAX_BATTLE_ZONE_USERS	150

// Zone level requirements (should really be in a database or something...)
#define MIN_LEVEL_BORDER_DEFANCE	20
#define MIN_LEVEL_NATION_BASE		35
#define MIN_LEVEL_ESLANT			60
#define MIN_LEVEL_BIFROST			70
#define MIN_LEVEL_WAR_ZONE			35
#define MIN_LEVEL_NIEDS_TRIANGLE	35
#define MAX_LEVEL_NIEDS_TRIANGLE	59
#define MIN_LEVEL_RONARK_LAND		35
#define MIN_LEVEL_ARDREAM			35
#define MAX_LEVEL_ARDREAM			59
#define MIN_LEVEL_RONARK_LAND_BASE	45
#define MAX_LEVEL_RONARK_LAND_BASE	69
#define MIN_LEVEL_UNDER_THE_CASTLE	70
#define MIN_LEVEL_JURAD_MOUNTAIN	70
#define MIN_LEVEL_KROWAZ_DOMINION	70

// Where to respawn after dying in the Moradon arenas
#define MINI_ARENA_RESPAWN_X		734
#define MINI_ARENA_RESPAWN_Z		427
#define MINI_ARENA_RESPAWN_RADIUS	5

// Bonus experience in War zones or PK zones
#define PVP_BONUS_EXP 10000
#define PVP_BONUS_GOLD 150000

// Where to Warp dodo or laon camp in the enemy nation zone
#define DODO_CAMP_WARP_X      10540
#define DODO_CAMP_WARP_Z      11410
#define LAON_CAMP_WARP_X      10120
#define LAON_CAMP_WARP_Z      9140
#define DODO_LAON_WARP_RADIUS    5

// Automatic Ranking Minutes
#define RELOAD_KNIGHTS_AND_USER_RATING 10 // Minute
#define RELOAD_GAME_UPDATE 10 // Secound

// Where to respawn after dying in the Chaos Stone boss
#define CHAOS_STONE_MONSTER_RESPAWN_RADIUS 20
#define CHAOS_STONE_MONSTER_LIVE_TIME 900  // (15 minutes)

// Standard (pre-squared) range used for moradon mini arena.
#define RANGE_20M (20.0f * 20.0f)

// Standard (pre-squared) range used for party rewards and such.
#define RANGE_50M (50.0f * 50.0f)

// Some item ID definitions
#define MIN_ITEM_ID 100000000
#define MAX_ITEM_ID 999999999

// Item IDs
#define ITEM_CONT_RECOVERY		800370000
#define ITEM_SCROLL_OF_IDENTITY	800032000
#define ITEM_CLAN_NAME_SCROLL	800086000
#define ITEM_CONT_RESTORE_CERT	810324000
#define ITEM_NATION_TRANSFER    810096000
#define ITEM_GENDER_CHANGE		810594000 //800560000
#define ITEM_JOB_CHANGE			900006000
#define ITEM_MEAT_DUMPLING		508216000
#define ITEM_EVENT_PARTICI		930046000
#define GOLDEN_MATTOCK			389135000
#define MATTOCK					389132000
#define MYSTERIOUS_ORE			399210000
#define MYSTERIOUS_GOLD_ORE		399200000
#define SLING					389043000
#define KING_SCEPTER			910074311
#define CHAOS_MAP				910246000
#define VOUCHER_OF_CHAOS		900106000
#define VOUCHER_OF_ORACLE		900184000
#define CERTIFICATE_OF_VICTORY	900017000
#define BORDER_SECURITY_SCROLL1	900142000
#define BORDER_SECURITY_SCROLL2	900143000
#define BORDER_SECURITY_SCROLL3	900055000
#define LUNAR_ORDER_TOKEN		810977000
#define FORGETTEN_TEMPLE_COIN1  810445000
#define FORGETTEN_TEMPLE_COIN2  810446000
#define RED_TREASURE_CHEST		379154000
#define GREEN_TREASURE_CHEST	379155000
#define BLUE_TREASURE_CHEST		379156000
#define KNIGHT_MEDAL			389217000
#define ROYAL_MEDAL				389218000
#define KING_MEDAL				389219000
#define GOLD_EAGLE_WINGS		900177663
#define ITEM_MAKE_OVER			810340000
#define ITEM_MONSTER_STONE		900144023
#define ITEM_MONSTER_HUNT1		910138000
#define ITEM_MONSTER_HUNT2		910038000
#define ITEM_MONSTER_HUNT3		910039000
#define ITEM_ONLINE_REWARD		930045000
#define ITEM_LIGHT_PIT			700041000
#define ITEM_DRAIN_RESTORE		700040000
#define ITEM_KILLING_BLADE		700037000
#define ITEM_RED_KEY			310046000
#define ITEM_BLUE_KEY			310045000
#define ITEM_BLACK_KEY			310047000
#define FISHING					191346000
#define GOLDEN_FISHING			191347000
#define RAINWORM				508226000
#define EXP_FLASH				399127000
#define DC_FLASH				399128000
#define WAR_FLASH				399129000
#define LOGOSSHOUT				910143000
#define LOGOSSHOUT1				800075000
#define RETURNTOKENS			810512000
#define CERTIFIKAOFDRAKI		810595000
#define QUALIFICATION_OF_REBITH 900579000
#define DUNGEON_DEFENCE_RIFT_ITEM 914057000

#define TROPHY_OF_FLAME			  800149000	
#define DENTED_IRONMASS			  508147000
#define PETRIFIED_WEAPON_SHRAPNEL 508149000
#define IRON_POWDER_OF_CHAIN	  508151000
#define PLWITOONS_TEAR			  508152000
#define HORN_OF_PLUWITOON		  810479000
#define OFFLINE_MERCHANT_ITEM	  900677882//700048768
#define OFFLINE_MINING_ITEM		  700059768
#define OFFLINE_FISHING_ITEM	  700069768

#define SILVERY_GEM				389196000
#define RED_GEM					389197000
#define YELLOW_GEM				389198000
#define BLUE_GEM				389199000
#define GREEN_GEM				389201000
#define BLACK_GEM				389205000

#define VIP_SAFE_KEY_1			810442000
#define VIP_SAFE_KEY_7			998019000
#define VIP_SAFE_KEY_30			800442000

#define KAUL_ITEM				610001000
#define ITEM_SEAL_SCROLL		800111000
#define ITEM_CYPHER_RING	    800112000

#define MONSTER_COIN_ITEM		914058000
#define MONSTER_RIFT_JEWEL		914069000
#define MONSTER_RIFT_VOUCHER	914057000

#define SPIRIT_OF_GENIE			810305000
#define SOUL_GEM				930670000

#define ROBIN_LOOT_ITEM			950680000
#define ITEM_CLAN_PREMIUM		811000000

#define TIMING_TYON				900335523
#define TIMING_MEGANTHEREON		900336524
#define	TIMING_HELLHOUND	    900337525

// ID of the Seed quest, to be automatically started on first load.
#define STARTER_SEED_QUEST		500

#define SKILLPACKET						80000
#define MONUMENT_KARUS_SPID				14003
#define MONUMENT_ELMORAD_SPID			14004
#define MONUMENT_ENEMY_SPID				14005
#define BDW_KARUS_MONUMENT_SPID			14105
#define BDW_ELMO_MONUMENT_SPID			14105
#define CLAN_VS_MONUMENT_SPID			29516

#define ELMORAD_MONUMENT_SID		10301
#define ASGA_VILLAGE_MONUMENT_SID	10302
#define RAIBA_VILLAGE_MONUMENT_SID  10303
#define DODO_CAMP_MONUMENT_SID		10304

#define LUFERSON_MONUMENT_SID    20301
#define LINATE_MONUMENT_SID      20302
#define BELLUA_MONUMENT_SID      20303
#define LAON_CAMP_MONUMENT_SID   20304
#define BORDER_WAR_MONUMENT_SID  31316

#define BDW_MONUMENT_SSID			4061
#define BDW_MONUMENT_SSID2			29466

#define JURAID_BRIDGE_SSID			8110
#define LEECH_KING_SSID				8100
#define KOCATRIS_SSID				8101
#define LILIME_SSID					8102
#define MINOTAUR_SSID				8103
#define BONE_DRAGON_SSID			8104
#define RED_DRAGON_HATCHLING_SSID	8105
#define DEVA_BIRD_SSID				8106
#define MONSTER_APOSTLE_SSID		2152
#define MONSTER_DOOM_SOLDIER_SSID	8007
#define MONSTER_TROLL_CAPTAIN_SSID	1772

#define MONSTER_KAUL_PET_SYSTEM		19000
#define ALTAR_OF_MANES				9840

/* Under The Castle Monster Ssid*/
#define MONSTER_EMPEROR_MAMMOTH_I	 9501
#define MONSTER_EMPEROR_MAMMOTH_II	 9502
#define MONSTER_EMPEROR_MAMMOTH_III	 9503
#define MONSTER_CRESHERGIMMIC_I		 9504
#define MONSTER_CRESHERGIMMIC_II	 9505
#define MONSTER_CRESHERGIMMIC_III	 9506
#define MONSTER_CRESHERGIMMIC_VI	 9507
#define MONSTER_PURIOUS_I			 9508
#define MONSTER_PURIOUS_II			 9509
#define MONSTER_PURIOUS_III			 9510
#define MONSTER_PURIOUS_VI			 9511
#define MONSTER_FLUWITON_ROOM_3_I	 9512
#define MONSTER_FLUWITON_ROOM_3_II	 9513
#define MONSTER_FLUWITON_ROOM_3_III	 9514
#define MONSTER_FLUWITON_ROOM_4_I	 9515
#define MONSTER_FLUWITON_ROOM_4_II	 9516
#define MONSTER_FLUWITON_ROOM_4_III	 9517
#define MONSTER_FLUWITON_ROOM_4_VI	 9518
#define MONSTER_ElITE_TIMARLI		 9523
#define MONSTER_ElITE_TIMARLI_III    9524
#define MONSTER_GARIONEUS			 9525
#define MONSTER_ELITE_GARIONEUS		 9526
#define MONSTER_MOEBIUS_RAGE		 9528
#define MONSTER_MOEBIUS_EVIL		 9529
#define MONSTER_SORCERER_GEDEN_I	 9530
#define MONSTER_SORCERER_GEDEN_II	 9531
#define MONSTER_SORCERER_GEDEN_III	 9532
#define MONSTER_ATAL				 9534
#define MONSTER_MOSPELL				 9535
#define MONSTER_AHMI				 9536
#define MONSTER_PIDAMA_I			 9537
#define MONSTER_VON_ELVIS_I			 9538
#define MONSTER_ElITE_TIMARLI_II     9541
#define MONSTER_ELITE_GARIONEUS_II   9542
#define MONSTER_MOEBIUS_RAGE_II		 9544
#define MONSTER_MOEBIUS_EVIL_II		 9545
#define MONSTER_PIDAMA_II			 9572
#define MONSTER_VON_ELVIS_II		 9573

#define CHAOS_STONE1				 8945
#define CHAOS_STONE2				 8946
#define CHAOS_STONE3				 8947

#define SAW_BLADE_SSID			32153
#define CHAOS_CUBE_SSID			31527
#define GUARD_SUMMON			8850

#define GATE1			9550
#define GATE2			9561
#define GATE3			9562

// Opens Castle War Dragon Armors Class
#define WARRIOR_DRAGON_ARMOR_PAULDRON		507001010
#define WARRIOR_DRAGON_ARMOR_PAD			507002010
#define WARRIOR_DRAGON_ARMOR_HELMET			507003010
#define WARRIOR_DRAGON_ARMOR_GAUNTLET		507004010
#define WARRIOR_DRAGON_ARMOR_BOOTS			507005010

#define ROGUE_DRAGON_ARMOR_PAULDRON			547001010
#define ROGUE_DRAGON_ARMOR_PAD				547002010
#define ROGUE_DRAGON_ARMOR_HELMET			547003010
#define ROGUE_DRAGON_ARMOR_GAUNTLET			547004010
#define ROGUE_DRAGON_ARMOR_BOOTS			547005010

#define MAGE_DRAGON_ARMOR_PAULDRON			567001010
#define MAGE_DRAGON_ARMOR_PAD				567002010
#define MAGE_DRAGON_ARMOR_HELMET			567003010
#define MAGE_DRAGON_ARMOR_GAUNTLET			567004010
#define MAGE_DRAGON_ARMOR_BOOTS				567005010

#define PRIEST_DRAGON_ARMOR_PAULDRON		587001018
#define PRIEST_DRAGON_ARMOR_PAD				587002018
#define PRIEST_DRAGON_ARMOR_HELMET			587003018
#define PRIEST_DRAGON_ARMOR_GAUNTLET		587004018
#define PRIEST_DRAGON_ARMOR_BOOTS			587005018

#define MAX_CR_EVENT_COUNT					500 
#define CR_EVENT_COUNT						4

#define NO_PREMIUM 0 // set to 6 to enable dummy premium for seal/unseal purposes
enum PremiumTypes
{
	Clan_Premium	= 2,
	Dummy_Premium	= 6,
	Royal_Premium	= 8,
	DISC_Premium	= 10,
	EXP_Premium		= 11,
	WAR_Premium		= 12
};

enum GuardOpCodes
{
	INITIATE = 1,
	ALIVE = 2,
	DISCONNECT = 3,
	CLIENTNAME_ERROR = 4,
	HDD_CHECK = 5,
	WALL_HACK = 6,
	DLL_INJECT = 7,
	BYPASS = 8,
	DEBUGGER = 9,
	TBL = 10,
	VIRTUAL_MACHINE = 11,
	UGLY_PROCESS = 12,
	UGLY_DRIVER = 13,
	MULTI_CLIENT = 14,
	TIMEOUT = 15,
	ERRORS = 16,
	CLOSE = 17
};

enum UserStatus
{
	USER_STATUS_DOT		= 1,
	USER_STATUS_POISON  = 2,
	USER_STATUS_SPEED	= 3,
	USER_STATUS_BLIND	= 4,
	USER_STATUS_BLACK	= 5
};

enum UserStatusBehaviour
{
	USER_STATUS_CURE	= 0,
	USER_STATUS_INFLICT	= 1
};

enum NpcStatusBehaviour
{
	NPC_STATUS_CURE		= 0,
	NPC_STATUS_INFLICT	= 1
};

enum CswNoticeStatus
{
	NoticeDeployBarrack		= 0,
	NoticeDeathMatch		= 1,
	NoticePreparation		= 2,
	NoticeCastellan			= 3,
	NoticeMonumentKilled	= 4,
	NoticeCswFinish			= 5
};


enum CswOperationStatus
{
	NotOperation	= 0,
	BarrackCreated	= 1,
	DeathMatch		= 2,
	Preparation		= 3,
	CastellanWar	= 4
};

enum LoyaltyType
{
	LOYALTY_NATIONAL_POINTS = 1,
	LOYALTY_MANNER_POINTS	= 2
};

enum AttributeType
{
	AttributeNone			= 0,
	AttributeFire			= 1,
	AttributeIce			= 2,
	AttributeLightning		= 3,
	AttributeLightMagic		= 4,
	AttributeCurse			= 5,
	AttributePosion			= 6
};

typedef union{
	uint16		w;
	uint8		b[2];
} MYSHORT;

typedef union{
	uint64		i;
	uint8		b[8];
} MYINT64;

#define TO_USER(v)	static_cast<CUser *>(v)
#define TO_NPC(v)	static_cast<CNpc *>(v)

#include "../shared/globals.h"